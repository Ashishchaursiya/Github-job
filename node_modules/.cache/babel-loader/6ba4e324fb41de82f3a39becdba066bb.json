{"ast":null,"code":"import { useReducer, useEffect } from 'react';\nimport axios from 'axios';\nconst ACTIONS = {\n  MAKE_REQUEST: 'make-request',\n  GET_DATA: 'get-data',\n  ERROR: 'error',\n  UPDATE_HAS_NEXT_PAGE: 'update-has-next-page'\n};\nconst BASE_URL = 'https://cors-anywhere.herokuapp.com/https://jobs.github.com/positions.json';\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case ACTIONS.MAKE_REQUEST:\n      return {\n        jobs: [],\n        loading: true\n      };\n\n    case ACTIONS.GET_DATA:\n      return { ...state,\n        jobs: action.payload.jobs,\n        loading: false\n      };\n\n    case ACTIONS.ERROR:\n      return { ...state,\n        jobs: [],\n        loading: false,\n        error: action.payload.error\n      };\n\n    case ACTIONS.UPDATE_HAS_NEXT_PAGE:\n      return { ...state,\n        hasNextPage: action.payload.hasNextPage\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport default function useFetchjobs(params, page) {\n  const [state, dispatch] = useReducer(reducer, {\n    jobs: [],\n    loading: true\n  });\n  useEffect(() => {\n    const cancelToken = axios.CancelToken.source();\n    dispatch({\n      type: ACTIONS.MAKE_REQUEST\n    });\n    axios.get(BASE_URL, {\n      cancelToken: cancelToken.token,\n      params: {\n        markdown: true,\n        page: page,\n        ...params\n      }\n    }).then(res => {\n      dispatch({\n        type: ACTIONS.GET_DATA,\n        payload: {\n          jobs: res.data\n        }\n      });\n    }).catch(e => {\n      if (axios.isCancel(e)) return;\n      dispatch({\n        type: ACTIONS.ERROR,\n        payload: {\n          error: e\n        }\n      });\n    });\n    axios.get(BASE_URL, {\n      cancelToken: cancelToken.token,\n      params: {\n        markdown: true,\n        page: page + 1,\n        ...params\n      }\n    }).then(res => {\n      dispatch({\n        type: ACTIONS.UPDATE_HAS_NEXT_PAGE,\n        payload: {\n          hasNextP: res.data\n        }\n      });\n    }).catch(e => {\n      if (axios.isCancel(e)) return;\n      dispatch({\n        type: ACTIONS.ERROR,\n        payload: {\n          error: e\n        }\n      });\n    });\n    return () => {\n      cancelToken.cancel();\n    };\n  }, [params, page]);\n  return state;\n}","map":{"version":3,"sources":["/home/ashish/web devlopment/react_pr/src/Fetchjob.js"],"names":["useReducer","useEffect","axios","ACTIONS","MAKE_REQUEST","GET_DATA","ERROR","UPDATE_HAS_NEXT_PAGE","BASE_URL","reducer","state","action","type","jobs","loading","payload","error","hasNextPage","useFetchjobs","params","page","dispatch","cancelToken","CancelToken","source","get","token","markdown","then","res","data","catch","e","isCancel","hasNextP","cancel"],"mappings":"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","sourcesContent":["import {useReducer,useEffect} from 'react';\nimport axios from 'axios'\nconst ACTIONS ={\n    MAKE_REQUEST:'make-request',\n    GET_DATA:'get-data',\n    ERROR:'error',\n    UPDATE_HAS_NEXT_PAGE:'update-has-next-page'\n}\nconst BASE_URL = 'https://cors-anywhere.herokuapp.com/https://jobs.github.com/positions.json'\n\nfunction reducer(state,action){\n    switch(action.type){\n       case ACTIONS.MAKE_REQUEST:\n           return {jobs:[],loading:true}\n        case ACTIONS.GET_DATA:\n            return {...state,jobs:action.payload.jobs,loading:false,}\n        case ACTIONS.ERROR:\n                return {...state,jobs:[],loading:false,error:action.payload.error}\n        case ACTIONS.UPDATE_HAS_NEXT_PAGE:\n            return {...state,hasNextPage:action.payload.hasNextPage}        \n         default:\n            return state;             \n    }\n\n}\nexport default   function useFetchjobs(params,page){\n    const [state,dispatch] = useReducer(reducer,{jobs:[],loading:true})\n    useEffect(() =>{\n     const cancelToken = axios.CancelToken.source()   \n     dispatch({type:ACTIONS.MAKE_REQUEST})\n     axios.get(BASE_URL,{\n         cancelToken:cancelToken.token,\n         params:{markdown:true,page:page,...params}\n     }).then( res =>{\n         dispatch({type:ACTIONS.GET_DATA,payload:{jobs:res.data}})\n     }).catch( e => {\n         if(axios.isCancel(e)) return\n         dispatch({type:ACTIONS.ERROR,payload:{error:e}})\n     })\n     axios.get(BASE_URL,{\n        cancelToken:cancelToken.token,\n        params:{markdown:true,page:page+1,...params}\n    }).then( res =>{\n        dispatch({type:ACTIONS.UPDATE_HAS_NEXT_PAGE,payload:{hasNextP:res.data}})\n    }).catch( e => {\n        if(axios.isCancel(e)) return\n        dispatch({type:ACTIONS.ERROR,payload:{error:e}})\n    })\n     return () =>{\n         cancelToken.cancel()\n     }\n    },[params,page])\n    return  state\n}"]},"metadata":{},"sourceType":"module"}